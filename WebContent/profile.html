<!DOCTYPE html>
<html lang="en">
	<head>
		<!--Required meta tags-->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<!--Logo to appear in the tab-->
		<link rel="icon" type="image/x-icon" href="./images/logo.ico">
		
		<!--Bootstrap CSS-->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		
		<script src="https://kit.fontawesome.com/b56caf5f15.js" crossorigin="anonymous"></script>
		<title>Welcome</title>
		<style>
		.display-6{
			font-size: 2.0rem;
		}
		
		.card{
			display: inline-block;
		}
		
		.overflow-auto{
			width: 150px;
			height: 40px;
			overflow: auto;
		}
		</style>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<div class="container-fluid">
				<a class="navbar-brand mb-0 h1">
					<img src="./images/logo.png" alt="" width="40" height="24" class="d-inline-block align-text-top">
					Pawlendar
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link active">My Profile</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="findusers.html">Find Users</a>
						</li>
						
					</ul>
				</div>
			</div>
			<div class="container-fluid">
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav ms-auto">
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
									<path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
									<path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
								</svg>
							</a>
							<ul class="dropdown-menu dropdown-menu-lg-dark" aria-labelledby="navbarDropdown">
								<li><a class="dropdown-item" href="manageinfo.html">Manage Account</a></li>
								<li><a class="dropdown-item">Logout</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<h1 id="welcomeProfile" class="display-6" align="center">My Profile</h1>
		
		<div class="container overflow-hidden">
			<div class="row">
				<div class="col-md-auto">
					<h3>About Me</h3>
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16"><path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/></svg>
					<label for="username"> Username: </label>
					<p id="result1"></p>
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16"><path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/></svg>
					<label for="location"> Location: </label>
					<p id="result2"></p>
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left-quote-fill" viewBox="0 0 16 16"><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm7.194 2.766a1.688 1.688 0 0 0-.227-.272 1.467 1.467 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 5.734 4C4.776 4 4 4.746 4 5.667c0 .92.776 1.666 1.734 1.666.343 0 .662-.095.931-.26-.137.389-.39.804-.81 1.22a.405.405 0 0 0 .011.59c.173.16.447.155.614-.01 1.334-1.329 1.37-2.758.941-3.706a2.461 2.461 0 0 0-.227-.4zM11 7.073c-.136.389-.39.804-.81 1.22a.405.405 0 0 0 .012.59c.172.16.446.155.613-.01 1.334-1.329 1.37-2.758.942-3.706a2.466 2.466 0 0 0-.228-.4 1.686 1.686 0 0 0-.227-.273 1.466 1.466 0 0 0-.469-.324l-.008-.004A1.785 1.785 0 0 0 10.07 4c-.957 0-1.734.746-1.734 1.667 0 .92.777 1.666 1.734 1.666.343 0 .662-.095.931-.26z"/></svg>
					<label for="bio"> Bio: </label>
					<div class="overflow-auto" syle="width: 250px; height: 80px; overflow: auto;"><p id="result3"></p></div>
					
					<script>
						//XMLHttpRequest object can be used to request data from a web server
						//create the request
						var xhttp = new XMLHttpRequest();
						//function to be executed every time the status of the request object changes
						xhttp.onreadystatechange = function(){
							//when these conditions are met then the response is ready
							if(this.readyState == 4 && this.status == 200){
								//the response text returns the server response as a string
								document.getElementById("result1").innerHTML = this.responseText;
								document.getElementById("welcomeProfile").innerHTML = this.responseText + "'s Profile";
							}
						};
						var url = "http://localhost:8080/Pawlendar/rest/getUsername/" + localStorage.getItem("emailLoggedin");
						xhttp.open("GET", url, true);
						xhttp.send();
					</script>
					<script>
						//XMLHttpRequest object can be used to request data from a web server
						//create the request
						var xhttp = new XMLHttpRequest();
						//function to be executed every time the status of the request object changes
						xhttp.onreadystatechange = function(){
							//when these conditions are met then the response is ready
							if(this.readyState == 4 && this.status == 200){
								//the response text returns the server response as a string
								document.getElementById("result2").innerHTML = this.responseText;
							}
						};
						var url = "http://localhost:8080/Pawlendar/rest/getLocation/" + localStorage.getItem("emailLoggedin");
						xhttp.open("GET", url, true);
						xhttp.send();
					</script>
					<script>
						//XMLHttpRequest object can be used to request data from a web server
						//create the request
						var xhttp = new XMLHttpRequest();
						//function to be executed every time the status of the request object changes
						xhttp.onreadystatechange = function(){
							//when these conditions are met then the response is ready
							if(this.readyState == 4 && this.status == 200){
								//the response text returns the server response as a string
								document.getElementById("result3").innerHTML = this.responseText;
							}
						};
						var url = "http://localhost:8080/Pawlendar/rest/getBio/" + localStorage.getItem("emailLoggedin");
						xhttp.open("GET", url, true);
						xhttp.send();
					</script>
				</div>
			</div>
			<br>
			<div class="row">
				<div class="col">
					<p id="badgeResult">
					<script>
						//XMLHttpRequest object can be used to request data from a web server
						//create the request
						var xhttp = new XMLHttpRequest();
						//function to be executed every time the status of the request object changes
						xhttp.onreadystatechange = function(){
							//when these conditions are met then the response is ready
							if(this.readyState == 4 && this.status == 200){
								//the response text returns the server response as a string
								document.getElementById("badgeResult").innerHTML = this.responseText;
							}
						};
						var url = "http://localhost:8080/Pawlendar/rest/getBadges/" + localStorage.getItem("emailLoggedin");
						xhttp.open("GET", url, true);
						xhttp.send();
					</script>
				</div>
			</div>
			<br>
			<br>
			<div class="row">
				<div class="col">
					<ul class="nav nav-tabs" id="myMenu" role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="pets-tab" data-bs-toggle="tab" data-bs-target="#pets" type="button" role="tab" aria-controls="pets" aria-selected="false">Pets</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="tasks-tab" data-bs-toggle="tab" data-bs-target="#tasks" type="button" role="tab" aria-controls="tasks" aria-selected="false">Tasks</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="followers-tab" data-bs-toggle="tab" data-bs-target="#followers" type="button" role="tab" aria-controls="followers" aria-selected="false">Followers</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="following-tab" data-bs-toggle="tab" data-bs-target="#following" type="button" role="tab" aria-controls="following" aria-selected="false">Following</button>
						</li>
					</ul>
					<div class="tab-content" id="myMenuContent">
						<div class="tab-pane fade" id="pets" role="tabpanel" aria-labelledby="pets-tab">
							<div class="row">
								<div class="col">
								<br>
									<form action="http://localhost:8080/Pawlendar/addPet.html">
										<input class="btn btn-secondary" type="submit" value="Add Pet" /><br>
									</form>
									<br>
									<p id="resultPets"></p>
									<script>
										//XMLHttpRequest object can be used to request data from a web server
										//create the request
										var xhttp = new XMLHttpRequest();
										//function to be executed every time the status of the request object changes
										xhttp.onreadystatechange = function(){
											//when these conditions are met then the response is ready
											if(this.readyState == 4 && this.status == 200){
												//the response text returns the server response as a string
												document.getElementById("resultPets").innerHTML = this.responseText;
											}
										};
										var url = "http://localhost:8080/Pawlendar/rest/getPets/" + localStorage.getItem("emailLoggedin");
										xhttp.open("GET", url, true);
										xhttp.send();
									</script>
								</div>
								<script>
									function removePet(id){
									//XMLHttpRequest object can be used to request data from a web server
									//create the request
									var xhttp = new XMLHttpRequest();
									//function to be executed every time the status of the request object changes
									xhttp.onreadystatechange = function(){
										//when these conditions are met then the response is ready
										if(this.readyState == 4 && this.status == 200){
											//the response text returns the server response as a string
											document.getElementById("resultPets").innerHTML = this.responseText;
										}
									};
									var url = "http://localhost:8080/Pawlendar/rest/removePet/" + id + "/" + localStorage.getItem("emailLoggedin");
									xhttp.open("DELETE", url, true);
									xhttp.send();
									window.location.reload();
								}
								
							</script>
							</div>		
						</div>
						<div class="tab-pane fade" id="tasks" role="tabpanel" aria-labelledby="tasks-tab">
							<br>
							<button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#taskModal">Add a task</button>
							<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModal" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<form id="addTaskForm" action="http://localhost:8080/Pawlendar/rest/createTask/" method="post">
											<script>
												var link = document.getElementById("addTaskForm");
												var email = localStorage.getItem("emailLoggedin");
												link.action = "http://localhost:8080/Pawlendar/rest/createTask/" + email;
											</script>
											
											<div class="modal-header">
												<h5 class="modal-title" id="foodModalLabel">Add a task</h5>
												<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
											</div>
											<div class="modal-body">
												<div class="mb-3">
													<label for="title" class="form-label">Title</label>
													<input type="text" class="form-control" name="title" id="title" placeholder="Title">
												</div>
												<div class="mb-3">
													<select type="text" class="form-select" name="day" id="day" placeholder="Location"required>
														<option selected disabled value ="">Day ... </option>
														<option value="1">1</option>
														<option value="2">2</option>
														<option value="3">3</option>
														<option value="4">4</option>
														<option value="5">5</option>
														<option value="6">6</option>
														<option value="7">7</option>
														<option value="8">8</option>
														<option value="9">9</option>
														<option value="10">10</option>
														<option value="11">11</option>
														<option value="12">12</option>
														<option value="13">13</option>
														<option value="14">14</option>
														<option value="15">15</option>
														<option value="16">16</option>
														<option value="17">17</option>
														<option value="18">18</option>
														<option value="19">19</option>
														<option value="20">20</option>
														<option value="21">21</option>
														<option value="22">22</option>
														<option value="23">23</option>
														<option value="24">24</option>
														<option value="25">25</option>
														<option value="26">26</option>
														<option value="27">27</option>
														<option value="28">28</option>
														<option value="29">29</option>
														<option value="30">30</option>
														<option value="31">31</option>
													</select>
													<select type="text" class="form-select" name="month" id="month" placeholder="Location"required>
														<option selected disabled value ="">Month ... </option>
														<option value="1">1</option>
														<option value="2">2</option>
														<option value="3">3</option>
														<option value="4">4</option>
														<option value="5">5</option>
														<option value="6">6</option>
														<option value="7">7</option>
														<option value="8">8</option>
														<option value="9">9</option>
														<option value="10">10</option>
														<option value="11">11</option>
														<option value="12">12</option>
													</select>
													<select type="text" class="form-select" name="year" id="year" placeholder="Location"required>
														<option selected disabled value ="">Year ... </option>
														<option value="2020">2020</option>
														<option value="2021">2021</option>
														<option value="2022">2022</option>
														<option value="2023">2023</option>
														<option value="2024">2024</option>
														<option value="2025">2025</option>
														<option value="2026">2026</option>
														<option value="2027">2027</option>
														<option value="2028">2028</option>
														<option value="2029">2029</option>
														<option value="2030">2030</option>
														<option value="2031">2031</option>
														<option value="2032">2032</option>
														<option value="2033">2033</option>
														<option value="2034">2034</option>
														<option value="2035">2035</option>
														<option value="2036">2036</option>
														<option value="2037">2037</option>
														<option value="2038">2038</option>
														<option value="2039">2039</option>
														<option value="2040">2040</option>
														<option value="2041">2041</option>
														<option value="2042">2042</option>
														<option value="2043">2043</option>
														<option value="2044">2044</option>
														<option value="2045">2045</option>
														<option value="2046">2046</option>
														<option value="2047">2047</option>
														<option value="2048">2048</option>
														<option value="2049">2049</option>
														<option value="2050">2050</option>
													</select>
												</div>
												<div class="mb-3">
													<label for="time" class="form-label">Time</label>
													<input type="time" class="form-control" name="time" id="time" placeholder="Time">
												</div>
												<div class="mb-3">
													<label for="petList" class="form-label">Pet</label>
													<select id="resultPetsForTask" type="text" class="form-control" name="petList" id="petList" placeholder="Pet" required>
														<script>
															//XMLHttpRequest object can be used to request data from a web server
															//create the request
															var xhttp = new XMLHttpRequest();
															//function to be executed every time the status of the request object changes
															xhttp.onreadystatechange = function(){
																//when these conditions are met then the response is ready
																if(this.readyState == 4 && this.status == 200){
																//the response text returns the server response as a string
																	document.getElementById("resultPetsForTask").innerHTML = this.responseText;
																}
															};
															var url = "http://localhost:8080/Pawlendar/rest/getPetsForTask/" + localStorage.getItem("emailLoggedin");
															xhttp.open("GET", url, true);
															xhttp.send();
														</script>
													</select>
												</div>
												<div class="mb-3">
													<label for="content" class="form-label">Content</label>
													<input type="text" class="form-control" name="content" id="content" placeholder="Content">
												</div>
												<div class="alert alert-warning alert-dismissible" role="alert">
													Repeat means that one task will be repeated the amount of times chosen. If every day is chosen the task will be repeated 365 times. If every month the task will be repeated 12 times. If every year is chosen the task will be repeated 5 times. If never is chosen the task is only created once.
													<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
												</div>
												<div class="mb-3">
													<select type="text" class="form-select" name="repeat" id="repeat" placeholder="Location"required>
														<option selected disabled value ="">Repeat ... </option>
														<option value="everyDay">every day</option>
														<option value="everyMonth">every month</option>
														<option value="everyYear">every year</option>
														<option value="never">never</option>
													</select>
												</div>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
												<input type="submit" class="btn btn-secondary">
											</div>
										</form>
									</div>
								</div>
							</div>
							<br>
							<br>
							<h4>My Tasks</h4>
							<div class="overflow-auto" style="width: 1300px; height: 600px; overflow: auto;">
								<table class="col-12">
									<thead>
										<tr>
											<th scope="col">Title</th>
											<th scope="col">Due Date</th>
											<th scope="col">Due Time</th>
											<th scope="col">Pet</th>
											<th scope="col">Content</th>
											<th scope="col">Action</th>
										</tr>
									</thead>
									<tbody id="resultTasks">
										<script>
											//XMLHttpRequest object can be used to request data from a web server
											//create the request
											var xhttp = new XMLHttpRequest();
											//function to be executed every time the status of the request object changes
											xhttp.onreadystatechange = function(){
												//when these conditions are met then the response is ready
												if(this.readyState == 4 && this.status == 200){
													//the response text returns the server response as a string
													document.getElementById("resultTasks").innerHTML = this.responseText;
												}
											};
											var url = "http://localhost:8080/Pawlendar/rest/getTasks/" + localStorage.getItem("emailLoggedin");
											xhttp.open("GET", url, true);
											xhttp.send();
										</script>
									</tbody>
								</table>
							</div>
							<script>
								function removeTask(i){
									//XMLHttpRequest object can be used to request data from a web server
									//create the request
									var xhttp = new XMLHttpRequest();
									//function to be executed every time the status of the request object changes
									xhttp.onreadystatechange = function(){
										//when these conditions are met then the response is ready
										if(this.readyState == 4 && this.status == 200){
											//the response text returns the server response as a string
											document.getElementById("resultTasks").innerHTML = this.responseText;
										}
									};
									var url = "http://localhost:8080/Pawlendar/rest/removeTask/" + i + "/" + localStorage.getItem("emailLoggedin");
									xhttp.open("DELETE", url, true);
									xhttp.send();
									window.location.reload();
								}
							</script>
						</div>
						<br>
						<br>
						<div class="tab-pane fade" id="followers" role="tabpanel" aria-labelledby="followers-tab">
							<p id = "resultFollowers">
							<script>
								//XMLHttpRequest object can be used to request data from a web server
								//create the request
								var xhttp = new XMLHttpRequest();
								//function to be executed every time the status of the request object changes
								xhttp.onreadystatechange = function(){
									//when these conditions are met then the response is ready
									if(this.readyState == 4 && this.status == 200){
										//the response text returns the server response as a string
										document.getElementById("resultFollowers").innerHTML = this.responseText;
									}
								};
								var url = "http://localhost:8080/Pawlendar/rest/getFollowers/" + localStorage.getItem("emailLoggedin");
								xhttp.open("GET", url, true);
								xhttp.send();
							</script>
						</div>
						<div class="tab-pane fade" id="following" role="tabpanel" aria-labelledby="following-tab">
						<p id = "resultFollowing">
						<script>
							//XMLHttpRequest object can be used to request data from a web server
							//create the request
								var xhttp = new XMLHttpRequest();
								//function to be executed every time the status of the request object changes
								xhttp.onreadystatechange = function(){
									//when these conditions are met then the response is ready
									if(this.readyState == 4 && this.status == 200){
										//the response text returns the server response as a string
										document.getElementById("resultFollowing").innerHTML = this.responseText;
									}
								};
								var url = "http://localhost:8080/Pawlendar/rest/getFollowing/" + localStorage.getItem("emailLoggedin");
								xhttp.open("GET", url, true);
								xhttp.send();
							</script>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	</body>
</html>